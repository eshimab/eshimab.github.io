This is the workflow for documentation using MkDocs and website hosting using GitHub Pages.

# Verify Branch and remote repository alias

Check your branch and remote repository aliases

```bash
cd ~/scidev
git status
git remote --verbose
```

You should see the alias `scimain`:

```bash
dhcp-168-105-223-225:scidev eshim$ git remote --verbose
scimain https://github.com/eshimab/eshimab.github.io (fetch)
scimain https://github.com/eshimab/eshimab.github.io (push)
```

# Resuming Work on Local Machine

## Pull from git

```bash
git pull scimain main
```

---

# Updating Files

## Build site with MkDocs

### Activate the python3 venv to run mkdocs

After updating the markdown documents in `scidev/notesite/docs`

```bash
# Move to the python3 virtual env bin directory to activate the venv
cd ~/scidev
source envsdir/mdocs/bin/activate # activate the python3 venv using command `source`
cd ~/scidev/notesite # move to the mkdocs root directory
mkdocs build # build the site with MkDocs
# Exit the virtual machine
deactivate
```

## Sync Local Files with `rsync`

1. Sync Files from `~/scidev/notesite/site` created by `MkDocs` in the `python3 venv` to  `~/scidev/notesite/docs` which is required for hosting on GitHub Pages
    1. `~/scidev/notesite/site` is the HTML Site Created by MkDocs in the python3 venv
    2. After Syncing from `~/scidev/notesite/site`, delete that directory because it is redundant.

```bash
# Move the mkdocs site to the scidev/docs so that GitHub Pages can find it
rsync --archive --progress --recursive --verbose --delete-after ~/scidev/notesite/site/* ~/scidev/docs
# Delete the generated site directory created by `mkdocs build`
rm -vR ~/scidev/notesite/site
# Back-Up Examples of local Docs
rsync --archive --progress --recursive --verbose  ~/Library/Application\ Support/Code/User/settings.json ~/scidev/notesite/examples/vscode/settings.json
```

## Use Git to Add/Commit To Local Branch and Push to Remote Branch

```bash
# Set Commit Message Variable
commit_message="Commit from Local Machine."
# Add / Commit / Push got Git
cd ~/scidev # Move to root dir of the local Git branch
git status
git remote --verbose # View the Remote Repository URL Aliases
#
# Add Changes ie Stage Commits on local machine
git add docs # this is the HTML site generated by mkdocs
git add notesite # Because we updated the md files here
git add mkupdate.sh # Add scidev/mkupdate.sh
git add scratch.md # Add Scratch File scidev/scratch.md
git add corefile.md # Add Scratch File scidev/scratch.md
git status
# Create a Commit on local machine branch
git commit -m "$commit_message"
# Push Changes from the local branch main and merge them with the repository alias scimain
git push scimain main
```

---

### Push Error?

You will get a `git push` error if the Local Branch is behind the Remote GitHub Repository
Commit Works
```bash
dhcp-168-105-223-225:scidev eshim$ git commit -m "$commit_message"
[main 8ddabfd] Updates to quickstart.md
 5 files changed, 512 insertions(+), 74 deletions(-)
 create mode 100644 notesite/examples/vscode/settings.json
 create mode 100644 scratch.md
```

I try to use `git push` to push commits from my local branch `main` to the Github Repository `scimain/main`

#### Push Command Error

I use Command `git push scimain main`
I get an error because `scimain` is ahead of my local `main`
```bash
dhcp-168-105-223-225:scidev eshim$ git push scimain main
To https://github.com/eshimab/eshimab.github.io
 ! [rejected]        main -> main (non-fast-forward)
error: failed to push some refs to 'https://github.com/eshimab/eshimab.github.io'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Integrate the remote changes (e.g.
hint: 'git pull ...') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.
dhcp-168-105-223-225:scidev eshim$ 
```

#### Pull Command Error

I try to use `git pull scimain main` To Update my Local Branch `main`
Returns Error:

```bash
E325: ATTENTION
Found a swap file by the name "~/scidev/.git/.MERGE_MSG.swp"
          owned by: eshim   dated: Mon Jul 10 16:42:19 2023
         file name: ~eshim/scidev/.git/MERGE_MSG
          modified: YES
         user name: eshim   host name: dhcp-168-105-223-225.wireless.manoa.haw
        process ID: 23271
While opening file "/Users/eshim/scidev/.git/MERGE_MSG"
             dated: Tue Jul 11 15:11:08 2023
      NEWER than swap file!

(1) Another program may be editing the same file.  If this is the case,
    be careful not to end up with two different instances of the same
    file when making changes.  Quit, or continue with caution.
(2) An edit session for this file crashed.
    If this is the case, use ":recover" or "vim -r /Users/eshim/scidev/.git/MERGE_MSG"
    to recover the changes (see ":help recovery").
    If you did this already, delete the swap file "/Users/eshim/scidev/.git/.MERGE_MSG.swp"
    to avoid this message.

Swap file "~/scidev/.git/.MERGE_MSG.swp" already exists!
[O]pen Read-Only, (E)dit anyway, (R)ecover, (D)elete it, (Q)uit, (A)bort: 
```

#### Solution Delete Old Vim Temporary Files `.MERGE_MSG.swo` and `.MERGE_MSG.swp`

- The file scidev/.git/.MERGE_MSG.swo appears to be a swap file created by the Vim text editor. Vim uses swap files with the .swo extension to store temporary changes made during editing sessions.
    - When you see this file in your Git repository, it usually indicates that you had a Vim session open and either closed it abruptly or encountered an issue while editing the .MERGE_MSG file. The swap file is created to allow recovery of unsaved changes in case of unexpected interruptions.
    - Since this is a temporary file specific to Vim, it is safe to delete it. You can use the following command to remove the swap file:
    ```bash
    rm ~/scidev/.git/.MERGE_MSG.swo
    rm ~/scidev/.git/.MERGE_MSG.swp
    ```

#### Attempt Pull Again: Error

I try the `git pull scimain main` Command and Get Error:

```bash
dhcp-168-105-223-225:scidev eshim$ git pull scimain main
error: You have not concluded your merge (MERGE_HEAD exists).
hint: Please, commit your changes before merging.
fatal: Exiting because of unfinished merge.
```

I use the code from Section **Add/Commit/Push Files to Git Repository** to Commit Changes to my Local Branch.

#### Attempt Push: Success

Push Succeeded!

```bash
git push scimain main
```

#### Attempt Pull:

Pull Attempt Succeeds! Local Branch `main` matches Remote Branch `scidev/main`

```bash
dhcp-168-105-223-225:scidev eshim$ git pull scimain main
From https://github.com/eshimab/eshimab.github.io
 * branch            main       -> FETCH_HEAD
Already up to date.
```

---

## Renaming and Syncing a File

If we want to change the name of the file `~/scidev/notesite/docs/influx.md` to `~/scidev/notesite/docs/influx.md`
```bash
# Perform Action
# bash command here?
# Set Commit Message
commit_message="Updates to workflow.md"
# Compile MkDocs Site with python venv
cd ~/scidev
source envsdir/mdocs/bin/activate # activate the python3 venv using command `source`
cd ~/scidev/notesite # move to the mkdocs root directory
mkdocs build # build the site with MkDocs
rsync --archive --progress --recursive --verbose --delete-after ~/scidev/notesite/site/* ~/scidev/docs # Syhc
rm -vR ~/scidev/notesite/site # Delete Original Compiled Site
deactivate # Exit venc
# Commit to Local GitHub Branch (should be main)
cd ~/scidev         # Move to root dir of the local Git branch
git add notesite    # MkDocs Working Directory with .md Files: scidev/notesite
git add docs        # HTML site generated by mkdocs: scidev/notesite/docs
git add mkupdate.sh # Start-up shell script for short-cuts: scidev/mkupdate.sh
git status
git commit -m "$commit_message" # Send Commit to Local GitHub Branch (should be main)
# Push Local GitHub Branch `main` to Remote GitHub Repository using Remote Repository URL alias `scimain`
git push scimain main
# Remember to initiate a Pull Request on your other devices before editting files!
```
